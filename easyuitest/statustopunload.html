<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>onbeforeunload Demo</title>
	<link rel="stylesheet" type="text/css" href="../src/easyui/easyui.css">
	<link rel="stylesheet" type="text/css" href="../src/easyui/icon.css">
	<link rel="stylesheet" type="text/css" href="../src/easyui/demo.css">
	<script type="text/javascript" src="../src/easyui/jquery.min.js"></script>
	<script type="text/javascript" src="../src/easyui/jquery.easyui.min.js"></script>
</head>
<body>
<h2>Alert Messager</h2>
<p>Click on each button to display different alert message box.</p>
<a href="../ierightclick.html">跳转到其他页面</a>

<button>点击按钮</button>
<div style="margin:20px 0;">
	<div style="margin:20px 0;">
		<a href="#" class="easyui-linkbutton" onclick="alert1()">Alert</a>
		<a href="#" class="easyui-linkbutton" onclick="confirm1();">Confirm</a>
	</div>
</div>
<script>
	//修改easyui源码加入一个独有的全局变量，只有当点击的是easyui的弹出框才能拿到这个变量，控制onbeforeunload的开关
	var status=true;
	window.onbeforeunload=function(){
		if(status){
			alert('刷新');
			//刷新关闭后要调的方法
		}
		else{
			status=true;
			return "";
		}
	};
	function alert1(){
		$.messager.alert('My Title','Here is a message!');
	}
	function confirm1() {
      $.messager.confirm('My Title', 'Are you confirm this?', function (r) {
          if (r) {
              alert('confirmed: ' + r);
          }
      });
	}
</script>
</body>
</html>